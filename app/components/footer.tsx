import { motion, useAnimation } from "framer-motion";
import { useEffect, useRef } from "react";

export function Footer() {
  const controls = useAnimation();
  const footerRef = useRef(null);

  useEffect(() => {
    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          controls.start({ opacity: 1, x: 0, y: 0 });
        }
      },
      { threshold: 0.1 }
    );

    if (footerRef.current) {
      observer.observe(footerRef.current);
    }

    return () => {
      if (footerRef.current) {
        observer.unobserve(footerRef.current);
      }
    };
  }, [controls]);

  const paths = [
    "M137.46 0H120.68C119.02 0 117.68 1.34 117.68 3V124.77L19.37 1.13C18.8 0.409999 17.94 0 17.02 0H3C1.34 0 0 1.34 0 3V163.66C0 165.32 1.34 166.66 3 166.66H20.01C21.67 166.66 23.01 165.32 23.01 163.66V41.91L121.09 165.53C121.66 166.25 122.53 166.67 123.44 166.67H137.46C139.12 166.67 140.46 165.33 140.46 163.67V3C140.46 1.34 139.12 0 137.46 0Z",
    "M299.67 1.8999H171.52C169.924 1.8999 168.63 3.1938 168.63 4.7899V21.6399C168.63 23.236 169.924 24.5299 171.52 24.5299H299.67C301.266 24.5299 302.56 23.236 302.56 21.6399V4.7899C302.56 3.1938 301.266 1.8999 299.67 1.8999ZM299.67 144.94H171.52C169.924 144.94 168.63 146.234 168.63 147.83V164.95C168.63 166.546 169.924 167.84 171.52 167.84H299.67C301.266 167.84 302.56 166.546 302.56 164.95V147.83C302.56 146.234 301.266 144.94 299.67 144.94ZM273.61 73.8901H171.52C169.924 73.8901 168.63 75.184 168.63 76.7801V93.6301C168.63 95.2262 169.924 96.5201 171.52 96.5201H273.61C275.206 96.5201 276.5 95.2262 276.5 93.6301V76.7801C276.5 75.184 275.206 73.8901 273.61 73.8901Z",
    "M400.36 0.68C376.63 0.68 354.92 9.05 339.23 24.23C323.54 39.42 314.9 60.41 314.9 83.33C314.9 106.25 323.54 127.24 339.23 142.43C354.92 157.62 376.63 165.98 400.36 165.98C424.09 165.98 445.54 157.65 461.2 142.51C476.93 127.32 485.59 106.3 485.59 83.33C485.59 60.36 476.93 39.34 461.2 24.15C445.54 9.02 423.93 0.68 400.36 0.68ZM445.19 127.65C433.71 138.98 417.79 145.22 400.36 145.22C382.93 145.22 366.78 138.98 355.21 127.65C343.64 116.31 337.26 100.58 337.26 83.34C337.26 66.1 343.63 50.37 355.21 39.03C366.78 27.7 382.81 21.46 400.36 21.46C417.91 21.46 433.71 27.7 445.19 39.03C456.68 50.37 463.01 66.1 463.01 83.35C463.01 100.6 456.68 116.33 445.19 127.67V127.65Z", // O1
    "M612.99 77.87H534.88V22.35H622.85C624.51 22.35 625.85 21.01 625.85 19.35V5.03C625.85 3.37 624.51 2.03 622.85 2.03H515.3C513.64 2.03 512.3 3.37 512.3 5.03V161.65C512.3 163.31 513.64 164.65 515.3 164.65H531.88C533.54 164.65 534.88 163.31 534.88 161.65V98.2H612.99C614.65 98.2 615.99 96.86 615.99 95.2V80.88C615.99 79.22 614.65 77.88 612.99 77.88V77.87Z", // F
    "M710.94 3.78C710.45 2.71 709.38 2.03 708.21 2.03H691.85C690.68 2.03 689.61 2.71 689.12 3.78L617.42 160.4C616.99 161.33 617.07 162.41 617.62 163.27C618.17 164.13 619.12 164.65 620.15 164.65H637.4C638.58 164.65 639.65 163.96 640.14 162.88L658.16 122.81H741.66L759.68 162.88C760.16 163.96 761.24 164.65 762.42 164.65H779.9C780.92 164.65 781.87 164.13 782.43 163.27C782.98 162.41 783.06 161.33 782.63 160.4L710.93 3.78H710.94ZM666.91 103.38L699.92 29.61L732.93 103.38H666.91Z", // A
    "M870.2 21.45C888.26 21.45 902.74 27.23 914.44 39.12C915 39.69 915.77 40.01 916.57 40.02C917.32 40.04 918.14 39.71 918.71 39.14L929.24 28.62C930.38 27.49 930.42 25.66 929.34 24.47C915.33 9.12 894.17 0.67 869.76 0.67C845.35 0.67 824.46 9.01 808.83 24.14C793.16 39.31 784.53 60.33 784.53 83.32C784.53 106.31 793.15 127.32 808.8 142.5C824.41 157.64 845.98 165.97 869.54 165.97C893.1 165.97 915.19 157.44 929.34 141.95C930.42 140.76 930.38 138.94 929.24 137.8L918.71 127.28C918.14 126.71 917.34 126.39 916.56 126.4C915.76 126.4 914.99 126.74 914.43 127.31C902.79 139.34 888.33 145.19 870.21 145.19C834.11 145.19 806.89 118.59 806.89 83.31C806.89 48.03 834.11 21.43 870.21 21.43L870.2 21.45Z", // C
    "M1076.64 5.02C1076.64 3.36 1075.3 2.02 1073.64 2.02H946.82C945.16 2.02 943.82 3.36 943.82 5.02V19.34C943.82 21 945.16 22.34 946.82 22.34H998.94V161.64C998.94 163.3 1000.28 164.64 1001.94 164.64H1018.52C1020.18 164.64 1021.52 163.3 1021.52 161.64V22.35H1073.64C1075.3 22.35 1076.64 21.01 1076.64 19.35V5.02Z", // T
    "M1161.92 0.68C1138.19 0.68 1116.48 9.05 1100.79 24.23C1085.1 39.42 1076.46 60.41 1076.46 83.33C1076.46 106.25 1085.1 127.24 1100.79 142.43C1116.48 157.62 1138.19 165.98 1161.92 165.98C1185.65 165.98 1207.1 157.65 1222.76 142.51C1238.49 127.32 1247.15 106.3 1247.15 83.33C1247.15 60.36 1238.49 39.34 1222.76 24.15C1207.1 9.02 1185.49 0.68 1161.92 0.68ZM1206.75 127.65C1195.27 138.98 1179.35 145.22 1161.92 145.22C1144.49 145.22 1128.34 138.98 1116.77 127.65C1105.2 116.31 1098.82 100.58 1098.82 83.34C1098.82 66.1 1105.19 50.37 1116.77 39.03C1128.34 27.7 1144.37 21.46 1161.92 21.46C1179.47 21.46 1195.27 27.7 1206.75 39.03C1218.24 50.37 1224.57 66.1 1224.57 83.35C1224.57 100.6 1218.24 116.33 1206.75 127.67V127.65Z", // O2
    "M1368.55 109.44C1390.58 100.9 1402.64 83.03 1402.64 58.72C1402.64 41.35 1396.36 26.92 1384.48 16.98C1372.78 7.19 1355.86 2.02 1335.56 2.02H1276.86C1275.2 2.02 1273.86 3.36 1273.86 5.02V161.64C1273.86 163.3 1275.2 164.64 1276.86 164.64H1293.44C1295.1 164.64 1296.44 163.3 1296.44 161.64V114.97H1335.56C1339.47 114.97 1343.05 114.81 1346.68 114.46L1381.52 163.38C1382.08 164.17 1382.99 164.64 1383.96 164.64H1402.11C1403.23 164.64 1404.26 164.01 1404.78 163.01C1405.3 162.01 1405.21 160.81 1404.56 159.89L1368.56 109.43L1368.55 109.44ZM1335.11 94.87H1296.44V22.35H1335.11C1372.26 22.35 1380.06 42.13 1380.06 58.73C1380.06 82.04 1364.1 94.88 1335.11 94.88V94.87Z", // R
    "M1551.25 3.56C1550.72 2.61 1549.72 2.03 1548.63 2.03H1532.05C1531 2.03 1530.03 2.57 1529.49 3.47L1478.28 87.21L1427.07 3.47C1426.52 2.58 1425.55 2.03 1424.51 2.03H1406.81C1405.72 2.03 1404.72 2.62 1404.19 3.56C1403.66 4.51 1403.68 5.67 1404.25 6.59L1466.54 108.34V161.64C1466.54 163.3 1467.88 164.64 1469.54 164.64H1485.9C1487.56 164.64 1488.9 163.3 1488.9 161.64V108.34L1551.19 6.59C1551.76 5.66 1551.78 4.5 1551.25 3.56Z", // Y
  ];

  return (
    <>
      <hr className="m-0 h-px w-full border-none bg-gradient-to-r from-zinc-200/0 via-zinc-500/30 to-zinc-200/0 mb-32" />
      <div ref={footerRef} className="w-full max-w-section mx-auto px-section">
        <svg
          width="1552"
          height="168"
          viewBox="0 0 1552 168"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          className="w-full h-auto"
        >
          {paths.map((d, index) => (
            <motion.path
              key={index}
              d={d}
              fill={`url(#paint${index}_linear)`}
              initial={{ opacity: 0, x: -10, y: -10 }}
              animate={controls}
              transition={{ delay: index * 0.1, duration: 0.5 }}
            />
          ))}
          <defs>
            {Array.from({ length: 10 }).map((_, index) => (
              <linearGradient
                key={index}
                id={`paint${index}_linear`}
                x1="235.595"
                y1="1.8999"
                x2="235.595"
                y2="167.84"
                gradientUnits="userSpaceOnUse"
              >
                <stop stopColor="#383B40" />
                <stop offset="1" stopColor="#1E1E1E" />
              </linearGradient>
            ))}
          </defs>
        </svg>
      </div>
    </>
  );
}
